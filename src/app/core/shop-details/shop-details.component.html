<div class="row mt-4">
  <div class="col-lg-3 d-flex justify-content-center">
    <div>
      <div
        *ngFor="let item of availableCatergory; index as i"
        class="shop-details-categories"
      >
        <h6 (click)="handleCategoryClick(item._id, i)">
          {{ item.category | titlecase }}
        </h6>
      </div>
    </div>
  </div>
  <div class="col-lg-5 custom-scroll">
    <div *ngIf="shopDataWithCategory && shopDataWithCategory.length === 0">
      No item added yet
    </div>

    <div *ngIf="shopDataWithCategory && !(shopDataWithCategory.length === 0)">
      <div *ngFor="let data of shopDataWithCategory; index as i">
        <h5 *ngIf="i === 0">{{ data.populateCategoryName | titlecase }}</h5>
        <div class="row mt-3">
          <div class="col-lg-6">
            <div class="row">
              <div class="col-lg-1 d-flex align-items-center">
                <div>
                  <div
                    style="
                      height: 10px;
                      width: 10px;
                      background-color: #5bc574;
                      border-radius: 50%;
                      display: inline-block;
                    "
                  ></div>
                </div>
              </div>
              <div class="col-lg-4">
                <img
                  src="https://i.picsum.photos/id/0/5616/3744.jpg?hmac=3GAAioiQziMGEtLbfrdbcoenXoWAW-zlyEAMkfEdBzQ"
                  alt="product-1"
                  class="product-img"
                />
              </div>
              <div class="col-lg-7">
                <span>{{ data.productName }}</span>
                <br /><br />
                <div class="rating border-rounded">
                  <mat-icon
                    aria-hidden="false"
                    aria-label="Example home icon"
                    class="rating-icon"
                    >star</mat-icon
                  ><span class="rating-txt">4.5</span>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="d-flex justify-content-end">
              <div>
                <div class="d-flex justify-content-end">
                  <button
                    class="btn btn-light border"
                    (click)="handleAdd(data)"
                    data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasExample1"
                    aria-controls="offcanvasExample"
                  >
                    Add
                  </button>
                </div>
                <p class="mt-3">
                  Available in
                  <span *ngFor="let item of data.quantitySet; index as i">
                    {{ item.availablein }}
                    <span *ngIf="i !== data.quantitySet.length - 1">,</span>
                  </span>
                </p>
              </div>
            </div>
          </div>
        </div>
        <hr style="height: 3px" *ngIf="i !== shopDataWithCategory.length - 1" />
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <mat-card class="mx-3 my-3">
      <div>
        <h5>Cart Empty</h5>
        <img
          src="../../../assets/Images/empty_cart.jpg"
          alt="card_default_img"
        />
        <br />
        <p class="mt-3">
          Your cart is look like empty. Go ahead, items are waiting in the menu
          card.
        </p>
      </div>
    </mat-card>
  </div>
</div>

<div
  class="offcanvas show offcanvas-start"
  tabindex="-1"
  id="offcanvasExample1"
  aria-labelledby="offcanvasExampleLabel"
>
  <div class="d-flex justify-content-end m-3">
    <button
      type="button"
      class="btn-close text-reset"
      data-bs-dismiss="offcanvas"
      aria-label="Close"
    ></button>
  </div>
  <div class="m-2">
    <mat-card>
      <div class="row">
        <div class="col-lg-6" *ngIf="cartItems && cartItems.length > 0">
          {{ cartItems[0].categoryName }}
        </div>
        <div class="col-lg-6 d-flex justify-content-end">stars</div>
      </div>
    </mat-card>
  </div>
  <div *ngFor="let cartItem of cartItems; index as i">
    <div class="offcanvas-body mx-4 my-2">
      <mat-card>
        <div class="row">
          <div class="col-lg-4">
            <img
              src="https://i.picsum.photos/id/0/5616/3744.jpg?hmac=3GAAioiQziMGEtLbfrdbcoenXoWAW-zlyEAMkfEdBzQ"
              alt="product-1"
              style="width: 70px; height: 70px"
            />
          </div>
          <div class="col-lg-3">
            <p>{{ cartItem.availablein }}</p>
            <p *ngIf="cartItem.discount">{{ cartItem.discount }}%</p>
          </div>
          <div class="col-lg-5 d-flex justify-content-end">
            <div>
              <p class="text-end">
                {{
                  cartItem.productPriceWithDiscount | currency: "INR":"symbol"
                }}
              </p>
              <p class="text-end" style="color: grey">
                <s>{{ cartItem.productprice | currency: "INR":"symbol" }}</s>
              </p>

              <button
                *ngIf="counter !== 0"
                class="btn app-green-bg border px-2 mx-1"
                (click)="addToCart(cartItem, i)"
              >
                -
              </button>
              <button class="btn border border-dark mx-1">{{ counter }}</button>
              <button
                class="btn app-green-bg border px-2 mx-1"
                (click)="removeFromCart(cartItem, i)"
              >
                +
              </button>
            </div>
          </div>
        </div>
      </mat-card>
    </div>
  </div>
</div>
